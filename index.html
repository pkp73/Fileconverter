<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>File Converter</title>
<style>
  body {
    margin: 0; 
    font-family: Arial, sans-serif; 
    background: linear-gradient(135deg, #4caf50, #2196f3); 
    color: white; 
    text-align: center;
    padding: 20px;
  }
  h1 {
    font-size: 3em;
    margin-bottom: 0.2em;
  }
  p {
    font-size: 1.3em;
    opacity: 0.8;
    margin-bottom: 1.5em;
  }
  .converter {
    background: white;
    color: #222;
    padding: 20px;
    border-radius: 12px;
    max-width: 450px;
    margin: 30px auto;
    box-shadow: 0 0 15px rgba(0,0,0,0.3);
  }
  input[type="file"] {
    margin: 15px 0;
    width: 100%;
  }
  button {
    background: #4caf50;
    color: white;
    font-size: 1.1em;
    padding: 10px 20px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
  }
  button:hover {
    background: #45a049;
  }
  #pdfImages img {
    max-width: 100%;
    margin: 10px 0;
    border: 1px solid #ccc;
    border-radius: 8px;
  }
</style>
</head>
<body>

<h1></h1>
<p>Your trusted file converter & tools hub</p>

<!-- JPG/PNG to PDF -->
<div class="converter" id="jpgToPdf">
  <h2>ðŸ–¼ JPG/PNG to PDF Converter</h2>
  <input type="file" id="imageFiles" accept="image/png, image/jpeg" multiple />
  <br />
  <button onclick="convertToPDF()">Convert & Download PDF</button>
  <div id="output"></div>
</div>

<!-- PDF to Images -->
<div class="converter" id="pdfToImg">
  <h2>ðŸ“„ PDF to Images Converter</h2>
  <input type="file" id="pdfFile" accept="application/pdf" />
  <br />
  <button onclick="convertPdfToImages()">Convert & Show Images</button>
  <div id="pdfImages"></div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.14.305/pdf.min.js"></script>
<script>
  // JPG/PNG to PDF converter (existing)
  async function convertToPDF() {
    const { jsPDF } = window.jspdf;
    const files = document.getElementById('imageFiles').files;
    const output = document.getElementById('output');
    output.textContent = '';
    
    if (!files.length) {
      alert("Please select at least one image.");
      return;
    }

    const pdf = new jsPDF();

    for (let i = 0; i < files.length; i++) {
      const file = files[i];
      const imgData = await toBase64(file);
      const img = new Image();
      img.src = imgData;
      await new Promise(resolve => (img.onload = resolve));
      
      const pageWidth = pdf.internal.pageSize.getWidth();
      const pageHeight = pdf.internal.pageSize.getHeight();
      const imgWidth = img.width;
      const imgHeight = img.height;

      // Calculate dimensions to keep aspect ratio and fit page
      let width, height;
      if (imgWidth > imgHeight) {
        width = pageWidth;
        height = (imgHeight * pageWidth) / imgWidth;
      } else {
        height = pageHeight;
        width = (imgWidth * pageHeight) / imgHeight;
      }

      if (i > 0) pdf.addPage();

      pdf.addImage(img, 'JPEG', 0, 0, width, height);
    }

    pdf.save('converted.pdf');
  }

  function toBase64(file) {
    return new Promise((resolve, reject) => {
      const reader = new FileReader();
      reader.readAsDataURL(file);
      reader.onload = () => resolve(reader.result);
      reader.onerror = error => reject(error);
    });
  }

  // PDF to Images converter (new)
  async function convertPdfToImages() {
    const fileInput = document.getElementById('pdfFile');
    const pdfImagesDiv = document.getElementById('pdfImages');
    pdfImagesDiv.innerHTML = '';

    if (!fileInput.files.length) {
      alert('Please select a PDF file.');
      return;
    }

    const file = fileInput.files[0];
    const fileReader = new FileReader();

    fileReader.onload = async function() {
      const typedarray = new Uint8Array(this.result);

      const loadingTask = pdfjsLib.getDocument(typedarray);
      const pdf = await loadingTask.promise;

      for (let pageNum = 1; pageNum <= pdf.numPages; pageNum++) {
        const page = await pdf.getPage(pageNum);
        const viewport = page.getViewport({ scale: 1.5 });

        const canvas = document.createElement('canvas');
        const context = canvas.getContext('2d');
        canvas.height = viewport.height;
        canvas.width = viewport.width;

        await page.render({ canvasContext: context, viewport: viewport }).promise;

        const img = document.createElement('img');
        img.src = canvas.toDataURL('image/png');
        img.alt = `Page ${pageNum}`;
        pdfImagesDiv.appendChild(img);
      }
    };

    fileReader.readAsArrayBuffer(file);
  }
</script>

</body>
</html>